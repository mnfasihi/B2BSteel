<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B2BSteel | Ù¾Ù„ØªÙØ±Ù… ØªØ®ØµØµÛŒ Ù‚Ø§Ù„Ø¨ ÙÙ„Ø²ÛŒ Ø¨ØªÙ† Ùˆ Ø³ÙˆÙ„Ù‡</title>
    
    <!-- ÙÙˆÙ†Øª Ùˆ Ø¢ÛŒÚ©ÙˆÙ† -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* ========== Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø±Ù†Ú¯ ========== */
        :root {
            --primary: #004586;
            --primary-dark: #002f5c;
            --accent: #E6B800;
            --bg: #F7F7F7;
            --card-bg: #FFFFFF;
            --muted: #6b7280;
            --dark: #1E1E1E;
            --text-dark: #2A2A2A;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --info: #3b82f6;
        }

        * {
            font-family: 'Vazirmatn', sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--bg);
            color: var(--dark);
            line-height: 1.6;
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        button {
            cursor: pointer;
            border: none;
            background: none;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .hidden {
            display: none !important;
        }

        /* ========== Ù†Ø§ÙˆØ¨Ø±ÛŒ ========== */
        .navbar {
            background: var(--card-bg);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-icon {
            background: var(--primary);
            color: white;
            width: 45px;
            height: 45px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .logo-text h1 {
            font-size: 1.5rem;
            color: var(--primary);
            font-weight: 700;
        }

        .logo-text .slogan {
            font-size: 0.8rem;
            color: var(--accent);
        }

        .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
            flex-wrap: wrap;
        }

        .nav-link {
            color: #4b5563;
            padding: 12px 20px;
            border-radius: 6px;
            font-size: 1.5rem;
            font-weight: 500;
        }

        .nav-link:hover {
            background: #f3f4f6;
            color: var(--primary);
        }

        @media (max-width: 992px) {
            .nav-link {
                font-size: 1.3rem;
                padding: 10px 15px;
            }
        }

        /* ========== Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ ========== */
        .btn {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 6px;
            font-weight: 600;
            text-align: center;
            transition: all 0.3s;
            font-size: 0.95rem;
            white-space: nowrap;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #059669;
            transform: translateY(-2px);
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-info {
            background: var(--info);
            color: white;
        }

        .btn-secondary {
            background: var(--muted);
            color: white;
        }

        .btn-sm {
            padding: 5px 10px;
            font-size: 0.85rem;
        }

        /* ========== Ø§Ø³Ù„Ø§ÛŒØ¯Ø´Ùˆ ========== */
        .hero-slideshow {
            width: 100%;
            height: 500px;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .hero-slide {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            background-size: cover;
            background-position: center;
        }

        .hero-slide.active {
            opacity: 1;
        }

        .hero-slide::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1;
        }

        .hero-slide-content {
            position: relative;
            z-index: 2;
            color: white;
            text-align: center;
            top: 50%;
            transform: translateY(-50%);
        }

        .hero-slide-content h2 {
            font-size: 3rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .hero-slide-content p {
            font-size: 1.3rem;
            max-width: 800px;
            margin: 0 auto;
        }

        /* ========== Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡â€ŒÙ‡Ø§ ========== */
        .counters {
            background: white;
            padding: 3rem 0;
        }

        .counters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .counter-item {
            text-align: center;
        }

        .counter-number {
            font-size: 3rem;
            font-weight: bold;
            color: var(--primary);
        }

        /* ========== ØµÙØ­Ù‡ Ø³ÙˆÙ„Ù‡ ========== */
        #shed-page {
            position: relative;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .shed-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background-image: url('images/slide1.jpg');
            background-size: cover;
            background-position: center;
            filter: blur(5px) brightness(0.5);
        }

        .shed-content {
            width: 70%;
            margin: 2rem auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 3rem 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        /* ========== Ú©Ø§Ø±Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ ========== */
        .request-item {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-right: 4px solid var(--primary);
        }

        .request-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .request-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--primary);
        }

        .request-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            background: #dbeafe;
            color: #1e40af;
        }

        .request-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
            padding: 1rem 0;
            border-top: 1px solid #e5e7eb;
            border-bottom: 1px solid #e5e7eb;
        }

        .request-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        /* ========== Ù¾Ø§Ø³Ø® Ø§Ø³ØªØ¹Ù„Ø§Ù… ========== */
        .bid-item {
            background: #f8fafc;
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            border-right: 3px solid var(--success);
        }

        .bid-price {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--success);
        }

        /* ========== Ù…ÙˆØ¯Ø§Ù„ ========== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 10px;
            width: 90%;
            max-width: 700px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
        }

        .modal-body {
            padding: 1.5rem;
        }

        .modal-footer {
            padding: 1.5rem;
            border-top: 1px solid #e5e7eb;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        /* ========== ÙØ±Ù…â€ŒÙ‡Ø§ ========== */
        .auth-container {
            max-width: 500px;
            margin: 2rem auto;
        }

        .auth-card {
            background: white;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .form-control {
            width: 100%;
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 1rem;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
        }

        .user-type-selector {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .user-type-btn {
            flex: 1;
            padding: 15px;
            border: 2px solid #d1d5db;
            border-radius: 6px;
            text-align: center;
            cursor: pointer;
        }

        .user-type-btn.active {
            border-color: var(--primary);
            background: #eff6ff;
        }

        /* ========== Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ ========== */
        .dashboard {
            padding: 2rem 0;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .stat-card .value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
        }

        .dashboard-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        /* ========== Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ† ========== */
        .admin-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 2rem;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 1rem;
        }

        .admin-tab {
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
        }

        .admin-tab.active {
            background: var(--primary);
            color: white;
        }

        .request-with-bids {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .bids-container {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 2px dashed #e5e7eb;
        }

        /* ========== ÙÙˆØªØ± ========== */
        .footer {
            background: var(--primary-dark);
            color: #ddd;
            padding: 4rem 0;
            margin-top: 4rem;
        }

        .footer a {
            color: #ccc;
        }

        .footer a:hover {
            color: var(--accent);
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            margin-top: 2rem;
            border-top: 1px solid #374151;
        }
    </style>
</head>
<body>
<!-- ========== Ù†Ø§ÙˆØ¨Ø±ÛŒ ========== -->
<nav class="navbar">
    <div class="container nav-container">
        <div class="logo">
            <div class="logo-icon">
                <i class="fas fa-cubes"></i>
            </div>
            <div class="logo-text">
                <h1>B2BSteel</h1>
                <div class="slogan">Ø§Ø¹ØªÙ…Ø§Ø¯ - Ø´ÙØ§ÙÛŒØª - Ø³Ø±Ø¹Øª</div>
            </div>
        </div>
        
        <div class="nav-links">
            <a href="#" class="nav-link" onclick="window.showPage('home')">Ø®Ø§Ù†Ù‡</a>
            <a href="#" class="nav-link" onclick="window.showPage('concrete-formwork')">Ù‚Ø§Ù„Ø¨ Ø¨ØªÙ†</a>
            <a href="#" class="nav-link" onclick="window.showPage('shed')">Ø³ÙˆÙ„Ù‡</a>
            <a href="#" class="nav-link" onclick="window.showPage('blog')">Ø¨Ù„Ø§Ú¯</a>
            <a href="#" class="nav-link" onclick="window.showPage('terms')">Ù‚ÙˆØ§Ù†ÛŒÙ†</a>
            <a href="#" class="nav-link" onclick="window.showPage('guide')">Ø±Ø§Ù‡Ù†Ù…Ø§</a>
            
            <div id="auth-buttons">
                <button class="btn btn-primary btn-sm" onclick="window.showPage('login')">ÙˆØ±ÙˆØ¯</button>
                <button class="btn btn-secondary btn-sm" onclick="window.showPage('register')">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</button>
            </div>
            
            <div id="user-menu" class="hidden">
                <button class="btn btn-primary btn-sm" onclick="window.showPage('dashboard')">Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</button>
                <button class="btn btn-danger btn-sm" onclick="window.logout()">Ø®Ø±ÙˆØ¬</button>
            </div>
            
            <div id="seller-formwork-menu" class="hidden">
                <button class="btn btn-primary btn-sm" onclick="window.showPage('seller-formwork-dashboard')">Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ ÙØ±ÙˆØ´Ù†Ø¯Ù‡ Ù‚Ø§Ù„Ø¨</button>
                <button class="btn btn-danger btn-sm" onclick="window.logout()">Ø®Ø±ÙˆØ¬</button>
            </div>
            
            <div id="seller-shed-menu" class="hidden">
                <button class="btn btn-success btn-sm" onclick="window.showPage('seller-shed-dashboard')">Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ ÙØ±ÙˆØ´Ù†Ø¯Ù‡ Ø³ÙˆÙ„Ù‡</button>
                <button class="btn btn-danger btn-sm" onclick="window.logout()">Ø®Ø±ÙˆØ¬</button>
            </div>
            
            <div id="admin-menu" class="hidden">
                <button class="btn btn-warning btn-sm" onclick="window.showPage('admin')">Ù¾Ù†Ù„ Ø§Ø¯Ù…ÛŒÙ†</button>
                <button class="btn btn-danger btn-sm" onclick="window.logout()">Ø®Ø±ÙˆØ¬</button>
            </div>
        </div>
    </div>
</nav>

<!-- ========== ØµÙØ­Ø§Øª ========== -->
<main id="pages">

    <!-- ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ -->
    <section id="home-page" class="page">
        <div class="hero-slideshow" onclick="window.nextSlide()">
            <div class="hero-slide active" style="background-image: url('images/slide1.jpg');">
                <div class="hero-slide-content">
                    <h2>Ø³ÙˆÙ„Ù‡â€ŒÙ‡Ø§ÛŒ ØµÙ†Ø¹ØªÛŒ</h2>
                    <p>Ø·Ø±Ø§Ø­ÛŒ Ùˆ Ø§Ø¬Ø±Ø§ÛŒ Ø³ÙˆÙ„Ù‡ Ø¨Ø§ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯Ù‡Ø§ÛŒ Ø¬Ù‡Ø§Ù†ÛŒ</p>
                </div>
            </div>
            <div class="hero-slide" style="background-image: url('images/slide2.jpg');">
                <div class="hero-slide-content">
                    <h2>Ù‚Ø§Ù„Ø¨ ÙÙ„Ø²ÛŒ Ø¨ØªÙ†</h2>
                    <p>Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ Ù…Ø¯Ø±Ù† Ù‚Ø§Ù„Ø¨â€ŒØ¨Ù†Ø¯ÛŒ</p>
                </div>
            </div>
            <div class="hero-slide" style="background-image: url('images/slide3.jpg');">
                <div class="hero-slide-content">
                    <h2>Ø§Ø¬Ø±Ø§ÛŒ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ</h2>
                    <p>Ø¨Ø§ ØªÛŒÙ…ÛŒ Ù…Ø¬Ø±Ø¨ Ø¯Ø± Ú©Ù†Ø§Ø± Ø´Ù…Ø§ Ù‡Ø³ØªÛŒÙ…</p>
                </div>
            </div>
        </div>

        <div class="counters">
            <div class="container">
                <div class="counters-grid">
                    <div class="counter-item">
                        <div class="counter-number" id="counter-sellers">Û°</div>
                        <div>ÙØ±ÙˆØ´Ù†Ø¯Ù‡ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø´Ø¯Ù‡</div>
                    </div>
                    <div class="counter-item">
                        <div class="counter-number" id="counter-buyers">Û°</div>
                        <div>Ø®Ø±ÛŒØ¯Ø§Ø± Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø´Ø¯Ù‡</div>
                    </div>
                    <div class="counter-item">
                        <div class="counter-number" id="counter-transactions">Û°</div>
                        <div>ÙØ±ÙˆØ´ Ù†Ù‡Ø§ÛŒÛŒ Ø´Ø¯Ù‡</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ØµÙØ­Ù‡ Ù‚Ø§Ù„Ø¨ Ø¨ØªÙ† -->
    <section id="concrete-formwork-page" class="page hidden">
        <div style="background: linear-gradient(135deg, var(--primary-dark), var(--primary)); color: white; padding: 4rem 0; text-align: center;">
            <div class="container">
                <h2 style="font-size: 2.5rem;">Ø¨Ø®Ø´ Ù‚Ø§Ù„Ø¨ ÙÙ„Ø²ÛŒ Ø¨ØªÙ†</h2>
                <p style="font-size: 1.2rem; margin: 1rem 0;">Ø®Ø±ÛŒØ¯ Ùˆ ÙØ±ÙˆØ´ ØªØ®ØµØµÛŒ Ø§Ù†ÙˆØ§Ø¹ Ù‚Ø§Ù„Ø¨ ÙÙ„Ø²ÛŒ Ø¨ØªÙ†</p>
                <button class="btn btn-primary" style="background: white; color: var(--primary); padding: 12px 25px;" onclick="window.enterConcreteFormworkSystem()">
                    ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ… Ù‚Ø§Ù„Ø¨ Ø¨ØªÙ†
                </button>
            </div>
        </div>
    </section>

    <!-- ØµÙØ­Ù‡ Ø³ÙˆÙ„Ù‡ -->
    <section id="shed-page" class="page hidden">
        <div class="shed-background"></div>
        <div class="container shed-content">
            <h2 class="section-title">Ø¨Ø®Ø´ Ø³ÙˆÙ„Ù‡</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                <div style="background: white; border-radius: 10px; padding: 2rem; text-align: center;">
                    <h3>Ø³ÙˆÙ„Ù‡ Ù†Ùˆ</h3>
                    <button class="btn btn-primary" onclick="window.showPage('new-shed-request')" style="width: 100%; margin-top: 1rem;">
                        Ø«Ø¨Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øª
                    </button>
                </div>
                <div style="background: white; border-radius: 10px; padding: 2rem; text-align: center;">
                    <h3>Ø³ÙˆÙ„Ù‡ Ø¯Ø³Øª Ø¯ÙˆÙ…</h3>
                    <button class="btn btn-success" onclick="alert('Ø¯Ø± Ø­Ø§Ù„ ØªÙˆØ³Ø¹Ù‡')" style="width: 100%; margin-top: 1rem;">
                        Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- ØµÙØ­Ù‡ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø³ÙˆÙ„Ù‡ Ù†Ùˆ -->
    <section id="new-shed-request-page" class="page hidden">
        <div class="container" style="max-width: 800px; margin: 2rem auto;">
            <h2 style="color: var(--primary); text-align: center;">Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø³ÙˆÙ„Ù‡ Ù†Ùˆ</h2>
            <form id="new-shed-form" style="background: white; padding: 2rem; border-radius: 10px; margin-top: 2rem;">
                <div class="form-group">
                    <label>Ø·ÙˆÙ„ (Ù…ØªØ±)</label>
                    <input type="number" id="shed-length" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>Ø¹Ø±Ø¶ (Ù…ØªØ±)</label>
                    <input type="number" id="shed-width" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>Ø§Ø±ØªÙØ§Ø¹ (Ù…ØªØ±)</label>
                    <input type="number" id="shed-height" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>Ú©Ø§Ø±Ø¨Ø±ÛŒ</label>
                    <textarea id="shed-usage" class="form-control" required></textarea>
                </div>
                <div class="form-group">
                    <label>Ù…Ú©Ø§Ù†</label>
                    <input type="text" id="shed-location" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>Ø¢ÛŒØ§ Ù†Ù‚Ø´Ù‡ Ø¯Ø§Ø±ÛŒØ¯ØŸ</label>
                    <select class="form-control" onchange="document.getElementById('drawing-upload').style.display = this.value === 'yes' ? 'block' : 'none'">
                        <option value="no">Ø®ÛŒØ±</option>
                        <option value="yes">Ø¨Ù„Ù‡</option>
                    </select>
                </div>
                <div id="drawing-upload" style="display: none;">
                    <input type="file" class="form-control" accept=".jpg,.png,.pdf">
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; padding: 15px;">Ø«Ø¨Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øª</button>
            </form>
        </div>
    </section>

    <!-- ØµÙØ­Ù‡ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù‚Ø§Ù„Ø¨ Ø¨ØªÙ† -->
    <section id="new-concrete-request-page" class="page hidden">
        <div class="container" style="max-width: 800px; margin: 2rem auto;">
            <h2 style="color: var(--primary); text-align: center;">Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù‚Ø§Ù„Ø¨ Ø¨ØªÙ†</h2>
            <form id="new-concrete-form" style="background: white; padding: 2rem; border-radius: 10px; margin-top: 2rem;">
                <div class="form-group">
                    <label>Ø¹Ù†ÙˆØ§Ù†</label>
                    <input type="text" id="concrete-title" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>ØªÙˆØ¶ÛŒØ­Ø§Øª</label>
                    <textarea id="concrete-description" class="form-control" required></textarea>
                </div>
                <div class="form-group">
                    <label>Ù…Ú©Ø§Ù†</label>
                    <input type="text" id="concrete-location" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>Ø¬Ù†Ø³ Ù‚Ø§Ù„Ø¨</label>
                    <select id="concrete-material" class="form-control">
                        <option>ÙˆØ±Ù‚ Ø±ÙˆÛŒÙ‡ ÙÙˆÙ„Ø§Ø¯ Ù…Ø¨Ø§Ø±Ú©Ù‡</option>
                        <option>ÙˆØ±Ù‚ Ø±ÙˆÛŒÙ‡ Ùˆ ØªØ³Ù…Ù‡ ÙÙˆÙ„Ø§Ø¯ Ù…Ø¨Ø§Ø±Ú©Ù‡</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%; padding: 15px;">Ø«Ø¨Øª Ø¯Ø±Ø®ÙˆØ§Ø³Øª</button>
            </form>
        </div>
    </section>

    <!-- ØµÙØ­Ù‡ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… -->
    <section id="register-page" class="page hidden">
        <div class="auth-container">
            <div class="auth-card">
                <h2 class="auth-title">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</h2>
                <div class="user-type-selector">
                    <div class="user-type-btn active" onclick="window.selectUserType('buyer')">Ø®Ø±ÛŒØ¯Ø§Ø±</div>
                    <div class="user-type-btn" onclick="window.selectUserType('seller')">ÙØ±ÙˆØ´Ù†Ø¯Ù‡</div>
                </div>
                <div id="seller-type-selector" class="hidden" style="margin-bottom: 1rem;">
                    <select id="seller-type" class="form-control">
                        <option value="formwork">ÙØ±ÙˆØ´Ù†Ø¯Ù‡ Ù‚Ø§Ù„Ø¨ Ø¨ØªÙ†</option>
                        <option value="shed">ÙØ±ÙˆØ´Ù†Ø¯Ù‡ Ø³ÙˆÙ„Ù‡</option>
                    </select>
                </div>
                <form id="register-form">
                    <div class="form-group">
                        <label>Ø§ÛŒÙ…ÛŒÙ„</label>
                        <input type="email" id="reg-email" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
                        <input type="password" id="reg-password" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</label>
                        <input type="text" id="reg-name" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>ØªÙ„ÙÙ†</label>
                        <input type="tel" id="reg-phone" class="form-control" required>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…</button>
                </form>
            </div>
        </div>
    </section>

    <!-- ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯ -->
    <section id="login-page" class="page hidden">
        <div class="auth-container">
            <div class="auth-card">
                <h2 class="auth-title">ÙˆØ±ÙˆØ¯</h2>
                <form id="login-form">
                    <div class="form-group">
                        <label>Ø§ÛŒÙ…ÛŒÙ„</label>
                        <input type="email" id="login-email" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label>Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
                        <input type="password" id="login-password" class="form-control" required>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">ÙˆØ±ÙˆØ¯</button>
                </form>
            </div>
        </div>
    </section>

    <!-- ØµÙØ­Ù‡ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø®Ø±ÛŒØ¯Ø§Ø± -->
    <section id="dashboard-page" class="page hidden">
        <div class="container dashboard">
            <div class="dashboard-header">
                <div class="user-info">
                    <div class="user-avatar" id="user-avatar">?</div>
                    <h2 id="user-name">Ú©Ø§Ø±Ø¨Ø±</h2>
                </div>
                <div>
                    <button class="btn btn-success" onclick="window.showPage('new-shed-request')">Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø³ÙˆÙ„Ù‡</button>
                    <button class="btn btn-primary" onclick="window.showPage('new-concrete-request')">Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù‚Ø§Ù„Ø¨</button>
                </div>
            </div>
            <div id="buyer-requests"></div>
        </div>
    </section>

    <!-- ØµÙØ­Ù‡ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ ÙØ±ÙˆØ´Ù†Ø¯Ù‡ Ù‚Ø§Ù„Ø¨ -->
    <section id="seller-formwork-dashboard-page" class="page hidden">
        <div class="container dashboard">
            <div class="dashboard-header">
                <h2>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ ÙØ±ÙˆØ´Ù†Ø¯Ù‡ Ù‚Ø§Ù„Ø¨</h2>
                <button class="btn btn-danger" onclick="window.logout()">Ø®Ø±ÙˆØ¬</button>
            </div>
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª Ø§Ø±Ø³Ø§Ù„ÛŒ</h3>
                    <div class="value" id="formwork-bids-count">Û°</div>
                </div>
            </div>
            <h3 style="margin: 2rem 0 1rem;">Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ù‚Ø§Ù„Ø¨</h3>
            <div id="seller-formwork-requests"></div>
        </div>
    </section>

    <!-- ØµÙØ­Ù‡ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ ÙØ±ÙˆØ´Ù†Ø¯Ù‡ Ø³ÙˆÙ„Ù‡ -->
    <section id="seller-shed-dashboard-page" class="page hidden">
        <div class="container dashboard">
            <div class="dashboard-header">
                <h2>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ ÙØ±ÙˆØ´Ù†Ø¯Ù‡ Ø³ÙˆÙ„Ù‡</h2>
                <button class="btn btn-danger" onclick="window.logout()">Ø®Ø±ÙˆØ¬</button>
            </div>
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª Ø§Ø±Ø³Ø§Ù„ÛŒ</h3>
                    <div class="value" id="shed-bids-count">Û°</div>
                </div>
            </div>
            <h3 style="margin: 2rem 0 1rem;">Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø³ÙˆÙ„Ù‡</h3>
            <div id="seller-shed-requests"></div>
        </div>
    </section>

    <!-- Ù…ÙˆØ¯Ø§Ù„ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù‚Ø§Ù„Ø¨ -->
    <div id="formwork-bid-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù‚ÛŒÙ…Øª</h3>
                <button class="close-modal" onclick="window.closeModal('formwork-bid-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="bid-request-id">
                <div class="form-group">
                    <label>Ù‚ÛŒÙ…Øª Ù¾Ø§ÛŒÙ‡ (Ø±ÛŒØ§Ù„)</label>
                    <input type="text" id="bid-price" class="form-control" oninput="this.value = this.value.replace(/[^\d]/g,'')">
                </div>
                <div class="form-group">
                    <label>Ø¯Ø±ØµØ¯ Ø§Ø±Ø²Ø´ Ø§ÙØ²ÙˆØ¯Ù‡</label>
                    <select id="bid-vat" class="form-control">
                        <option value="9">Û¹Ùª</option>
                        <option value="10">Û±Û°Ùª</option>
                        <option value="15" selected>Û±ÛµÙª</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Ø²Ù…Ø§Ù† ØªØ­ÙˆÛŒÙ„ (Ø±ÙˆØ²)</label>
                    <input type="number" id="bid-delivery" class="form-control" value="30">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="window.closeModal('formwork-bid-modal')">Ø§Ù†ØµØ±Ø§Ù</button>
                <button class="btn btn-primary" onclick="window.submitFormworkBid()">Ø§Ø±Ø³Ø§Ù„</button>
            </div>
        </div>
    </div>

    <!-- Ù…ÙˆØ¯Ø§Ù„ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø³ÙˆÙ„Ù‡ -->
    <div id="shed-bid-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù‚ÛŒÙ…Øª</h3>
                <button class="close-modal" onclick="window.closeModal('shed-bid-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="shed-bid-request-id">
                <div class="form-group">
                    <label>Ù‚ÛŒÙ…Øª (Ø±ÛŒØ§Ù„)</label>
                    <input type="text" id="shed-bid-price" class="form-control" oninput="this.value = this.value.replace(/[^\d]/g,'')">
                </div>
                <div class="form-group">
                    <label>ÙˆØ²Ù† Ø§Ø³Ú©Ù„Øª (ØªÙ†)</label>
                    <input type="number" id="shed-bid-weight" class="form-control" step="0.1">
                </div>
                <div class="form-group">
                    <label>Ø²Ù…Ø§Ù† Ø³Ø§Ø®Øª (Ø±ÙˆØ²)</label>
                    <input type="number" id="shed-bid-time" class="form-control" value="45">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="window.closeModal('shed-bid-modal')">Ø§Ù†ØµØ±Ø§Ù</button>
                <button class="btn btn-primary" onclick="window.submitShedBid()">Ø§Ø±Ø³Ø§Ù„</button>
            </div>
        </div>
    </div>
</main>

<!-- ========== Ø§Ø³Ú©Ø±ÛŒÙ¾Øª ========== -->
<script type="importmap">
    {
        "imports": {
            "@supabase/supabase-js": "https://esm.sh/@supabase/supabase-js@2"
        }
    }
</script>

<script type="module">
    import { supabase } from './supabaseClient.js';
    
    window.supabase = supabase;
    let currentUser = JSON.parse(localStorage.getItem('current_user')) || null;
    window.currentUser = currentUser;
    let slideInterval;

    // ========== ØªÙˆØ§Ø¨Ø¹ Ù¾Ø§ÛŒÙ‡ ==========
    window.showPage = function(pageId) {
        document.querySelectorAll('.modal').forEach(m => m.classList.remove('active'));
        document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
        document.getElementById(`${pageId}-page`)?.classList.remove('hidden');
        window.updateNavigation();
        
        if (pageId === 'home') {
            window.loadCounters();
            window.initSlideshow();
        } else if (pageId === 'seller-formwork-dashboard') {
            window.loadSellerFormworkDashboard();
        } else if (pageId === 'seller-shed-dashboard') {
            window.loadSellerShedDashboard();
        } else if (pageId === 'dashboard') {
            window.loadBuyerDashboard();
        }
    };

    window.updateNavigation = function() {
        const auth = document.getElementById('auth-buttons');
        const user = document.getElementById('user-menu');
        const sellerF = document.getElementById('seller-formwork-menu');
        const sellerS = document.getElementById('seller-shed-menu');
        const admin = document.getElementById('admin-menu');
        
        [auth, user, sellerF, sellerS, admin].forEach(el => el?.classList.add('hidden'));
        
        if (!currentUser) {
            auth?.classList.remove('hidden');
        } else if (currentUser.isAdmin) {
            admin?.classList.remove('hidden');
        } else if (currentUser.userType === 'buyer') {
            user?.classList.remove('hidden');
        } else if (currentUser.userType === 'seller') {
            if (currentUser.sellerType === 'formwork') sellerF?.classList.remove('hidden');
            else if (currentUser.sellerType === 'shed') sellerS?.classList.remove('hidden');
        }
    };

    window.closeModal = function(modalId) {
        document.getElementById(modalId)?.classList.remove('active');
    };

    // ========== Ø§Ø³Ù„Ø§ÛŒØ¯Ø´Ùˆ ==========
    window.initSlideshow = function() {
        if (slideInterval) clearInterval(slideInterval);
        slideInterval = setInterval(window.nextSlide, 10000);
    };

    window.nextSlide = function() {
        const slides = document.querySelectorAll('.hero-slide');
        const current = document.querySelector('.hero-slide.active');
        const currentIndex = Array.from(slides).indexOf(current);
        current?.classList.remove('active');
        const nextIndex = (currentIndex + 1) % slides.length;
        slides[nextIndex]?.classList.add('active');
    };

    // ========== Ø´Ù…Ø§Ø±Ù†Ø¯Ù‡â€ŒÙ‡Ø§ ==========
    window.loadCounters = async function() {
        const { count: sellers } = await supabase.from('profiles').select('*', { count: 'exact', head: true }).eq('user_type', 'seller');
        const { count: buyers } = await supabase.from('profiles').select('*', { count: 'exact', head: true }).eq('user_type', 'buyer');
        document.getElementById('counter-sellers').textContent = sellers || 0;
        document.getElementById('counter-buyers').textContent = buyers || 0;
    };

    // ========== Ø§Ù†ØªØ®Ø§Ø¨ Ù†ÙˆØ¹ Ú©Ø§Ø±Ø¨Ø± ==========
    window.selectUserType = function(type) {
        document.querySelectorAll('.user-type-btn').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');
        document.getElementById('seller-type-selector').classList.toggle('hidden', type !== 'seller');
    };

    // ========== Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… ==========
    document.getElementById('register-form')?.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const userType = document.querySelector('.user-type-btn.active')?.innerText === 'Ø®Ø±ÛŒØ¯Ø§Ø±' ? 'buyer' : 'seller';
        const sellerType = document.getElementById('seller-type')?.value;
        
        const { data, error } = await supabase.auth.signUp({
            email: document.getElementById('reg-email').value,
            password: document.getElementById('reg-password').value
        });
        
        if (error) {
            alert(error.message);
            return;
        }
        
        if (data.user) {
            await supabase.from('profiles').insert([{
                user_id: data.user.id,
                email: data.user.email,
                full_name: document.getElementById('reg-name').value,
                phone: document.getElementById('reg-phone').value,
                user_type: userType,
                seller_type: sellerType,
                role: 'user'
            }]);
            
            currentUser = {
                id: data.user.id,
                email: data.user.email,
                userType,
                sellerType,
                full_name: document.getElementById('reg-name').value
            };
            localStorage.setItem('current_user', JSON.stringify(currentUser));
            window.currentUser = currentUser;
            
            alert('Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ù…ÙˆÙÙ‚');
            if (userType === 'buyer') window.showPage('dashboard');
            else if (sellerType === 'formwork') window.showPage('seller-formwork-dashboard');
            else window.showPage('seller-shed-dashboard');
        }
    });

    // ========== ÙˆØ±ÙˆØ¯ ==========
    document.getElementById('login-form')?.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        const { data, error } = await supabase.auth.signInWithPassword({
            email: document.getElementById('login-email').value,
            password: document.getElementById('login-password').value
        });
        
        if (error) {
            alert('Ø§ÛŒÙ…ÛŒÙ„ ÛŒØ§ Ø±Ù…Ø² Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª');
            return;
        }
        
        const { data: profile } = await supabase
            .from('profiles')
            .select('*')
            .eq('user_id', data.user.id)
            .single();
        
        currentUser = {
            id: data.user.id,
            email: data.user.email,
            userType: profile?.user_type,
            sellerType: profile?.seller_type,
            full_name: profile?.full_name,
            isAdmin: profile?.role === 'admin'
        };
        localStorage.setItem('current_user', JSON.stringify(currentUser));
        window.currentUser = currentUser;
        
        if (currentUser.isAdmin) window.showPage('admin');
        else if (currentUser.userType === 'buyer') window.showPage('dashboard');
        else if (currentUser.sellerType === 'formwork') window.showPage('seller-formwork-dashboard');
        else window.showPage('seller-shed-dashboard');
    });

    window.logout = async function() {
        await supabase.auth.signOut();
        currentUser = null;
        localStorage.removeItem('current_user');
        window.currentUser = null;
        window.showPage('home');
    };

    // ========== ÙØ±Ù… Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø³ÙˆÙ„Ù‡ ==========
    document.getElementById('new-shed-form')?.addEventListener('submit', async (e) => {
        e.preventDefault();
        if (!currentUser) { alert('ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯'); return; }
        
        await supabase.from('shed_requests').insert([{
            user_id: currentUser.id,
            dimensions: {
                length: parseFloat(document.getElementById('shed-length').value),
                width: parseFloat(document.getElementById('shed-width').value),
                height: parseFloat(document.getElementById('shed-height').value)
            },
            usage: document.getElementById('shed-usage').value,
            location: document.getElementById('shed-location').value,
            status: 'open',
            created_at: new Date()
        }]);
        
        alert('Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø«Ø¨Øª Ø´Ø¯');
        window.showPage('dashboard');
    });

    // ========== ÙØ±Ù… Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù‚Ø§Ù„Ø¨ ==========
    document.getElementById('new-concrete-form')?.addEventListener('submit', async (e) => {
        e.preventDefault();
        if (!currentUser) { alert('ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯'); return; }
        
        await supabase.from('concrete_requests').insert([{
            user_id: currentUser.id,
            title: document.getElementById('concrete-title').value,
            description: document.getElementById('concrete-description').value,
            project_location: document.getElementById('concrete-location').value,
            material: document.getElementById('concrete-material').value,
            status: 'open',
            created_at: new Date()
        }]);
        
        alert('Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø«Ø¨Øª Ø´Ø¯');
        window.showPage('dashboard');
    });

    // ========== Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø®Ø±ÛŒØ¯Ø§Ø± ==========
    window.loadBuyerDashboard = async function() {
        if (!currentUser) return;
        
        document.getElementById('user-name').textContent = currentUser.full_name || 'Ú©Ø§Ø±Ø¨Ø±';
        document.getElementById('user-avatar').textContent = (currentUser.full_name || '?').charAt(0);
        
        const { data: concrete } = await supabase
            .from('concrete_requests')
            .select('*')
            .eq('user_id', currentUser.id)
            .order('created_at', { ascending: false });
        
        const { data: shed } = await supabase
            .from('shed_requests')
            .select('*')
            .eq('user_id', currentUser.id)
            .order('created_at', { ascending: false });
        
        let html = '<h3>Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ù†</h3>';
        
        for (const req of [...(concrete || []), ...(shed || [])]) {
            const type = req.title ? 'Ù‚Ø§Ù„Ø¨' : 'Ø³ÙˆÙ„Ù‡';
            const bids = await supabase
                .from(type === 'Ù‚Ø§Ù„Ø¨' ? 'formwork_bids' : 'shed_bids')
                .select('*')
                .eq('request_id', req.id);
            
            html += `
                <div class="request-item">
                    <div class="request-header">
                        <span class="request-title">Ø¯Ø±Ø®ÙˆØ§Ø³Øª ${type}</span>
                        <span class="request-badge">${req.status === 'open' ? 'Ø¨Ø§Ø²' : 'Ø¨Ø³ØªÙ‡'}</span>
                    </div>
                    <div class="request-details">
                        ${req.title ? `<div>Ø¹Ù†ÙˆØ§Ù†: ${req.title}</div>` : ''}
                        ${req.location ? `<div>Ù…Ú©Ø§Ù†: ${req.location}</div>` : ''}
                        ${req.project_location ? `<div>Ù…Ú©Ø§Ù†: ${req.project_location}</div>` : ''}
                        ${req.dimensions ? `<div>Ø§Ø¨Ø¹Ø§Ø¯: ${req.dimensions.length}Ã—${req.dimensions.width}Ã—${req.dimensions.height}</div>` : ''}
                    </div>
                    ${bids.data?.length ? `
                        <div style="margin-top: 1rem;">
                            <strong>Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª (${bids.data.length}):</strong>
                            ${bids.data.map(b => `
                                <div class="bid-item">
                                    <span class="bid-price">${(b.total_price || b.price || 0).toLocaleString()} Ø±ÛŒØ§Ù„</span>
                                </div>
                            `).join('')}
                        </div>
                    ` : ''}
                </div>
            `;
        }
        
        document.getElementById('buyer-requests').innerHTML = html || '<p>Ø¯Ø±Ø®ÙˆØ§Ø³ØªÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯</p>';
    };

    // ========== Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ ÙØ±ÙˆØ´Ù†Ø¯Ù‡ Ù‚Ø§Ù„Ø¨ (Ø±ÙØ¹ Ø´Ø¯Ù‡) ==========
    window.loadSellerFormworkDashboard = async function() {
        console.log('ğŸ‘¤ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ ÙØ±ÙˆØ´Ù†Ø¯Ù‡ Ù‚Ø§Ù„Ø¨');
        
        if (!currentUser) {
            window.showPage('login');
            return;
        }
        
        const { data: { user } } = await supabase.auth.getUser();
        if (!user) return;
        
        try {
            // Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²
            const { data: requests, error } = await supabase
                .from('concrete_requests')
                .select('*')
                .eq('status', 'open')
                .order('created_at', { ascending: false });
            
            console.log('ğŸ“¥ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯Ù‡:', requests);
            
            if (error) throw error;
            
            const container = document.getElementById('seller-formwork-requests');
            if (!container) return;
            
            if (!requests || requests.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--muted);">Ø¯Ø±Ø®ÙˆØ§Ø³ØªÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</p>';
                return;
            }
            
            // Ø¯Ø±ÛŒØ§ÙØª Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª Ø§Ø±Ø³Ø§Ù„ÛŒ Ø§ÛŒÙ† ÙØ±ÙˆØ´Ù†Ø¯Ù‡
            const { data: myBids } = await supabase
                .from('formwork_bids')
                .select('request_id')
                .eq('seller_id', user.id);
            
            const myBidIds = new Set((myBids || []).map(b => b.request_id));
            
            let html = '';
            for (const req of requests) {
                const hasBid = myBidIds.has(req.id);
                
                html += `
                    <div class="request-item">
                        <div class="request-header">
                            <span class="request-title">${req.title || 'Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù‚Ø§Ù„Ø¨'}</span>
                            <span class="request-badge">Ø¨Ø§Ø²</span>
                        </div>
                        <div class="request-details">
                            <div>Ù…Ú©Ø§Ù†: ${req.project_location || 'Ù†Ø§Ù…Ø´Ø®Øµ'}</div>
                            <div>ØªÙˆØ¶ÛŒØ­Ø§Øª: ${req.description?.substring(0, 50)}...</div>
                        </div>
                        <div class="request-actions">
                            ${!hasBid ? 
                                `<button class="btn btn-primary btn-sm" onclick="window.showFormworkBidModal('${req.id}')">Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯</button>` : 
                                '<span style="color: green;">âœ“ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡</span>'
                            }
                        </div>
                    </div>
                `;
            }
            
            container.innerHTML = html;
            
            // Ø¢Ù…Ø§Ø±
            const { count } = await supabase
                .from('formwork_bids')
                .select('*', { count: 'exact', head: true })
                .eq('seller_id', user.id);
            
            document.getElementById('formwork-bids-count').textContent = count || 0;
            
        } catch (error) {
            console.error('âŒ Ø®Ø·Ø§:', error);
        }
    };

    // ========== Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ ÙØ±ÙˆØ´Ù†Ø¯Ù‡ Ø³ÙˆÙ„Ù‡ (Ø±ÙØ¹ Ø´Ø¯Ù‡) ==========
    window.loadSellerShedDashboard = async function() {
        console.log('ğŸ‘¤ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ ÙØ±ÙˆØ´Ù†Ø¯Ù‡ Ø³ÙˆÙ„Ù‡');
        
        if (!currentUser) {
            window.showPage('login');
            return;
        }
        
        const { data: { user } } = await supabase.auth.getUser();
        if (!user) return;
        
        try {
            // Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²
            const { data: requests, error } = await supabase
                .from('shed_requests')
                .select('*')
                .eq('status', 'open')
                .order('created_at', { ascending: false });
            
            console.log('ğŸ“¥ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø´Ø¯Ù‡:', requests);
            
            if (error) throw error;
            
            const container = document.getElementById('seller-shed-requests');
            if (!container) return;
            
            if (!requests || requests.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--muted);">Ø¯Ø±Ø®ÙˆØ§Ø³ØªÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</p>';
                return;
            }
            
            // Ø¯Ø±ÛŒØ§ÙØª Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª Ø§Ø±Ø³Ø§Ù„ÛŒ Ø§ÛŒÙ† ÙØ±ÙˆØ´Ù†Ø¯Ù‡
            const { data: myBids } = await supabase
                .from('shed_bids')
                .select('request_id')
                .eq('seller_id', user.id);
            
            const myBidIds = new Set((myBids || []).map(b => b.request_id));
            
            let html = '';
            for (const req of requests) {
                const hasBid = myBidIds.has(req.id);
                const dims = req.dimensions || {};
                
                html += `
                    <div class="request-item">
                        <div class="request-header">
                            <span class="request-title">Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø³ÙˆÙ„Ù‡</span>
                            <span class="request-badge">Ø¨Ø§Ø²</span>
                        </div>
                        <div class="request-details">
                            <div>Ø§Ø¨Ø¹Ø§Ø¯: ${dims.length || '?'}Ã—${dims.width || '?'}Ã—${dims.height || '?'}</div>
                            <div>Ù…Ú©Ø§Ù†: ${req.location || 'Ù†Ø§Ù…Ø´Ø®Øµ'}</div>
                            <div>Ú©Ø§Ø±Ø¨Ø±ÛŒ: ${req.usage || 'Ù†Ø§Ù…Ø´Ø®Øµ'}</div>
                        </div>
                        <div class="request-actions">
                            ${!hasBid ? 
                                `<button class="btn btn-primary btn-sm" onclick='window.showShedBidModal("${req.id}", ${JSON.stringify(dims)})'>Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯</button>` : 
                                '<span style="color: green;">âœ“ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡</span>'
                            }
                        </div>
                    </div>
                `;
            }
            
            container.innerHTML = html;
            
            // Ø¢Ù…Ø§Ø±
            const { count } = await supabase
                .from('shed_bids')
                .select('*', { count: 'exact', head: true })
                .eq('seller_id', user.id);
            
            document.getElementById('shed-bids-count').textContent = count || 0;
            
        } catch (error) {
            console.error('âŒ Ø®Ø·Ø§:', error);
        }
    };

    // ========== Ù…ÙˆØ¯Ø§Ù„ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ù‚Ø§Ù„Ø¨ ==========
    window.showFormworkBidModal = function(requestId) {
        document.getElementById('bid-request-id').value = requestId;
        document.getElementById('formwork-bid-modal').classList.add('active');
    };

    window.submitFormworkBid = async function() {
        const { data: { user } } = await supabase.auth.getUser();
        if (!user) return;
        
        const price = parseInt(document.getElementById('bid-price').value) || 0;
        if (!price) { alert('Ù‚ÛŒÙ…Øª Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯'); return; }
        
        const vatPercent = parseInt(document.getElementById('bid-vat').value);
        const vat = Math.round(price * vatPercent / 100);
        
        await supabase.from('formwork_bids').insert([{
            request_id: document.getElementById('bid-request-id').value,
            seller_id: user.id,
            base_price: price,
            vat_percent: vatPercent,
            vat_amount: vat,
            total_price: price + vat,
            delivery_time: parseInt(document.getElementById('bid-delivery').value),
            created_at: new Date()
        }]);
        
        alert('Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯');
        window.closeModal('formwork-bid-modal');
        window.loadSellerFormworkDashboard();
    };

    // ========== Ù…ÙˆØ¯Ø§Ù„ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø³ÙˆÙ„Ù‡ ==========
    window.showShedBidModal = function(requestId, dimensions) {
        document.getElementById('shed-bid-request-id').value = requestId;
        document.getElementById('shed-bid-modal').classList.add('active');
    };

    window.submitShedBid = async function() {
        const { data: { user } } = await supabase.auth.getUser();
        if (!user) return;
        
        const price = parseInt(document.getElementById('shed-bid-price').value) || 0;
        if (!price) { alert('Ù‚ÛŒÙ…Øª Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯'); return; }
        
        await supabase.from('shed_bids').insert([{
            request_id: document.getElementById('shed-bid-request-id').value,
            seller_id: user.id,
            price: price,
            weight: parseFloat(document.getElementById('shed-bid-weight').value) || 0,
            construction_time: parseInt(document.getElementById('shed-bid-time').value),
            created_at: new Date()
        }]);
        
        alert('Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯');
        window.closeModal('shed-bid-modal');
        window.loadSellerShedDashboard();
    };

    // ========== Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ ==========
    document.addEventListener('DOMContentLoaded', () => {
        window.updateNavigation();
        window.showPage('home');
    });
</script>
</body>
</html>